<!-- expenses.html build v2025-10-10-2 -->
<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>Expenses</title>
  <link rel="stylesheet" href="styles.css?v=1" /><meta name="viewport" content="width=device-width, initial-scale=1" />

</head><body>
<h1>Expenses</h1><p><a href="index.html">← Back to Main</a></p>
<h2>Add Expense</h2>
<div class="row">
  <input id="vendor" placeholder="Vendor" />
  <input id="category" placeholder="Category" />
  <input id="amount" type="number" step="0.01" placeholder="Amount" />
  <label><input id="taxable" type="checkbox" /> Taxable</label>
  <input id="date" type="date" />
  <input id="notes" placeholder="Notes" />
  <button id="addBtn">Add Expense</button>
</div>
<h2>Expenses List</h2>
<table id="expTable"><thead><tr><th>Date</th><th>Vendor</th><th>Category</th><th>Amount</th><th>Taxable</th><th>Notes</th><th>Actions</th></tr></thead><tbody></tbody></table>
<p>Marker: expenses.html build v2025-10-10-2</p>
<script>
const $=s=>document.querySelector(s), $$=s=>Array.from(document.querySelectorAll(s));
document.getElementById('date').value=new Date().toISOString().slice(0,10);
async function loadExpenses(){const arr=await (await fetch('/api/expenses')).json(); const tbody=$('#expTable tbody'); tbody.innerHTML=''; for(const e of arr){const tr=document.createElement('tr'); tr.innerHTML=`<td>${e.date||''}</td><td>${e.vendor||''}</td><td>${e.category||''}</td><td>${(+e.amount).toFixed(2)}</td><td>${e.taxable?'Yes':'No'}</td><td>${e.notes||''}</td><td><button data-id="${e.id}" class="del">Delete</button></td>`; tbody.appendChild(tr)} $$('#expTable .del').forEach(b=>b.onclick=async()=>{await fetch('/api/expenses/'+b.dataset.id,{method:'DELETE'}); loadExpenses();})}
$('#addBtn').onclick=async()=>{const p={vendor:$('#vendor').value,category:$('#category').value,amount:$('#amount').value,taxable:$('#taxable').checked,date:$('#date').value,notes:$('#notes').value}; await fetch('/api/expenses',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(p)}); $('#vendor').value=''; $('#category').value=''; $('#amount').value=''; $('#notes').value=''; loadExpenses();}
loadExpenses();
</script>
</body></html>

